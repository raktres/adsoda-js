!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("adsoda",[],t):"object"==typeof exports?exports.adsoda=t():e.adsoda=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){e.exports=function(e,t){"use strict";var n,r=(n=e)&&"object"==typeof n&&"default"in n?n:{default:n};function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"function"==typeof e?"function"==typeof t?function(){e.apply(this,arguments),t.apply(this,arguments)}:e:"function"==typeof t?t:void 0})}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"function"==typeof e?"function"==typeof t?function(){return e(t.apply(this,arguments))}:e:"function"==typeof t?t:void 0})}function c(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return n;return-1}function s(e,t){var n="function"==typeof t?t:function(t,n){for(var r=0;r<n.length;r++)if(!e(t[r],n[r]))return!1;return!0};return function(e,t){for(var r=0;r<e.length;r++)if(e[r].length===t.length&&n(e[r],t))return r;return-1}}function f(e,t){return t&&t!==i?o({},e,t,{onCacheAdd:u(e.onCacheAdd,t.onCacheAdd),onCacheChange:u(e.onCacheChange,t.onCacheChange),onCacheHit:u(e.onCacheHit,t.onCacheHit),transformArgs:a(e.transformArgs,t.transformArgs)}):e}function l(e,t,n){var r=c(e,t);-1!==r&&(clearTimeout(e[r].timeoutId),n&&e.splice(r,1))}function h(e,t){var n=setTimeout(e,t);return"function"==typeof n.unref&&n.unref(),n}function p(e,t){return function(n){var r=n.keys[0],o=c(e,r);~o&&(l(e,r,!1),e[o].timeoutId=h(e[o].expirationMethod,t.maxAge))}}function d(e,t,n,r){var o="number"==typeof t.maxAge&&isFinite(t.maxAge)?function(e,t,n,r){var o=t.maxAge;return function i(u,a,f){var p=u.keys[0];if(-1===c(e,p)){var d=function(){var o=s(n,r),c=o(u.keys,p),h=u.values[c];~c&&(u.keys.splice(c,1),u.values.splice(c,1),"function"==typeof t.onCacheChange&&t.onCacheChange(u,a,f)),l(e,p,!0),"function"==typeof t.onExpire&&!1===t.onExpire(p)&&(u.keys.unshift(p),u.values.unshift(h),i(u,a,f),"function"==typeof t.onCacheChange&&t.onCacheChange(u,a,f))};e.push({expirationMethod:d,key:p,timeoutId:h(d,o)})}}}(e,t,n,r):void 0;return{onCacheAdd:o,onCacheHit:o&&t.updateExpire?p(e,t):void 0}}var y={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},v=!1;function m(e){e?delete y.profiles[e]:y.profiles={}}function g(e){var t=e.profileName;return function(){t&&!y.profiles[t]&&(y.profiles[t]={calls:0,hits:0}),y.profiles[t].calls++}}function b(e){return function(){var t=y.profiles,n=e.profileName;t[n]||(t[n]={calls:0,hits:0}),t[n].calls++,t[n].hits++}}function S(e){var t=(new Error).stack,n=e.displayName||e.name||"Anonymous "+y.anonymousProfileNameCounter++;if(!t)return n;for(var r,o,i=t.split("\n").slice(3),u=0;u<i.length;u++)if(-1===(r=i[u]).indexOf("/moize/")&&-1===r.indexOf(" (native)")&&-1===r.indexOf(" Function.")){o=r.replace(/\n/g,"\\n").trim();break}return o?n+" "+o:n}function k(e,t){return e?(t/e*100).toFixed(4)+"%":"0.0000%"}function C(e){y.isCollectingStats||v||(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),v=!0);var t=y.profiles;if(e){if(!t[e])return{calls:0,hits:0,usage:"0.0000%"};var n=t[e];return o({},n,{usage:k(n.calls,n.hits)})}var r=Object.keys(y.profiles).reduce(function(e,n){return e.calls+=t[n].calls,e.hits+=t[n].hits,e},{calls:0,hits:0});return o({},r,{profiles:Object.keys(t).reduce(function(e,t){return e[t]=C(t),e},{}),usage:k(r.calls,r.hits)})}var x={constructor:!0,length:!0,name:!0,prototype:!0};function O(e,t,n){void 0===n&&(n=[]),Object.getOwnPropertyNames(e).forEach(function(r){if(!x[r]&&-1===n.indexOf(r)){var o=Object.getOwnPropertyDescriptor(e,r);o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}})}function j(e,t){return function(e,t){var n=t.expirations,r=e.options,o=s(r.isEqual,r.isMatchingKey),i=e;i.clear=function(){var e=i._microMemoizeOptions.onCacheChange,t=i.cache;return t.keys.length=0,t.values.length=0,e&&e(t,i.options,i),!0},i.clearStats=function(){m(i.options.profileName)},i.get=function(e){var t=i._microMemoizeOptions.transformKey,n=i.cache,r=t?t(e):e,u=o(n.keys,r);return-1!==u?i.apply(this,e):void 0},i.getStats=function(){return C(i.options.profileName)},i.has=function(e){var t=i._microMemoizeOptions.transformKey,n=t?t(e):e;return-1!==o(i.cache.keys,n)},i.keys=function(){return i.cacheSnapshot.keys},i.remove=function(e){var t=i._microMemoizeOptions,r=t.onCacheChange,u=t.transformKey,a=i.cache,c=o(a.keys,u?u(e):e);if(-1===c)return!1;var s=a.keys[c];return a.keys.splice(c,1),a.values.splice(c,1),r&&r(a,i.options,i),l(n,s,!0),!0},i.set=function(e,t){var n=i._microMemoizeOptions,r=i.cache,u=i.options,a=n.onCacheAdd,c=n.onCacheChange,s=n.transformKey,f=s?s(e):e,l=o(r.keys,f);if(-1===l){var h=u.maxSize-1;r.size>h&&(r.keys.length=h,r.values.length=h),r.keys.unshift(f),r.values.unshift(t),u.isPromise&&r.updateAsyncCache(i),a&&a(r,u,i),c&&c(r,u,i)}else{var p=r.keys[l];r.values[l]=t,l>0&&r.orderByLru(p,t,l),u.isPromise&&r.updateAsyncCache(i),"function"==typeof c&&c(r,u,i)}},i.values=function(){return i.cacheSnapshot.values}}(e,t),function(e,t){var n=t.expirations,r=t.options,o=t.originalFunction,i=e.options;Object.defineProperties(e,{_microMemoizeOptions:{configurable:!0,get:function(){return i}},cacheSnapshot:{configurable:!0,get:function(){var t=e.cache;return{keys:t.keys.slice(0),size:t.size,values:t.values.slice(0)}}},expirations:{configurable:!0,get:function(){return n}},expirationsSnapshot:{configurable:!0,get:function(){return n.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return r}},originalFunction:{configurable:!0,get:function(){return o}}}),O(o,e)}(e,t),e}var A="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function E(e,t){for(var n=e.length,r=0;r<n;++r)if(e[r]===t)return r+1;return 0}function w(e){var t,n,r=typeof e;return!e||"object"!==r&&"function"!==r?e:JSON.stringify(e,(t=[],n=[],function(e,r){var o=typeof r;if("function"===o||"symbol"===o)return r.toString();if("object"==typeof r){if(t.length){var i=E(t,this);0===i?t[t.length]=this:(t.splice(i),n.splice(i)),n[n.length]=e;var u=E(t,r);if(0!==u)return"[ref="+(n.slice(0,u).join(".")||".")+"]"}else t[0]=r,n[0]=e;return r}return""+r}))}function F(e){for(var t="|",n=0;n<e.length;n++)t+=w(e[n])+"|";return[t]}function q(e,t){return e[0]===t[0]}function P(e){if("function"==typeof e)return function(t,n,r){return e(r.cache,r.options,r)}}function I(e){return a(e.isSerialized&&function(e){return"function"==typeof e.serializer?e.serializer:F}(e),"function"==typeof e.transformArgs&&e.transformArgs,"number"==typeof e.maxArgs&&(t=e.maxArgs,function(e){if(t>=e.length)return e;if(0===t)return[];if(1===t)return[e[0]];if(2===t)return[e[0],e[1]];if(3===t)return[e[0],e[1],e[2]];for(var n=[],r=0;r<t;r++)n[r]=e[r];return n}));var t}var z=function e(n,a){var c=a||i;if(function(e){return"function"==typeof e&&e.isMoized}(n)){var s=n.originalFunction,l=f(n.options,c);return e(s,l)}if("object"==typeof n)return function(t,r){if("function"==typeof t){var o=f(n,r);return e(t,o)}var i=f(n,t);return e(i)};if(c.isReact)return function(e,t,n){var r=e(o({maxArgs:2,isShallowEqual:!0},n,{isReact:!1}));function i(e,n,o){this.props=e,this.context=n,this.updater=o,this.MoizedComponent=r(t)}return t.displayName||(t.displayName=t.name||"Component"),i.prototype.isReactComponent={},i.prototype.render=function(){return{$$typeof:A,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},O(t,i,["contextType","contextTypes"]),i.displayName="Moized("+(t.displayName||t.name||"Component")+")",i}(e,n,c);var h=o({},i,c,{maxAge:"number"==typeof c.maxAge&&c.maxAge>=0?c.maxAge:i.maxAge,maxArgs:"number"==typeof c.maxArgs&&c.maxArgs>=0?c.maxArgs:i.maxArgs,maxSize:"number"==typeof c.maxSize&&c.maxSize>=0?c.maxSize:i.maxSize,profileName:c.profileName||S(n)}),p=[],v=(h.matchesArg,h.isDeepEqual,h.isPromise),m=(h.isReact,h.isSerialized,h.isShallowEqual,h.matchesKey,h.maxAge,h.maxArgs,h.maxSize),k=h.onCacheAdd,C=h.onCacheChange,x=h.onCacheHit,E=(h.onExpire,h.profileName,h.serializer,h.updateCacheForKey),w=(h.transformArgs,h.updateExpire,function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(h,["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"])),F=function(e){return e.matchesArg||e.isDeepEqual&&t.deepEqual||e.isShallowEqual&&t.shallowEqual||t.sameValueZeroEqual}(h),z=function(e){return e.matchesKey||e.isSerialized&&q||void 0}(h),M=d(p,h,F,z),R=function(e){return y.isCollectingStats?{onCacheAdd:g(e),onCacheHit:b(e)}:{}}(h),_=I(h),N=o({},w,{isEqual:F,isMatchingKey:z,isPromise:v,maxSize:m,onCacheAdd:P(u(k,M.onCacheAdd,R.onCacheAdd)),onCacheChange:P(C),onCacheHit:P(u(x,M.onCacheHit,R.onCacheHit)),transformKey:_}),K=r.default(n,N),T=j(K,{expirations:p,options:h,originalFunction:n});return E?function(e){var t=e.options.updateCacheForKey;function n(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!t(r))return e.apply(this,r);var i=e.fn.apply(this,r);return e.set(r,i),i}return O(e,n),n}(T):T};return z.clearStats=m,z.collectStats=function(e){void 0===e&&(e=!0),y.isCollectingStats=e},z.compose=function(){return a.apply(void 0,arguments)||z},z.deep=z({isDeepEqual:!0}),z.getStats=C,z.infinite=z({maxSize:1/0}),z.isCollectingStats=function(){return y.isCollectingStats},z.isMoized=function(e){return"function"==typeof e&&!!e.isMoized},z.matchesArg=function(e){return z({matchesArg:e})},z.matchesKey=function(e){return z({matchesKey:e})},z.maxAge=function(e,t){if(!0===t)return z({maxAge:e,updateExpire:t});if("object"==typeof t){var n=t.onExpire,r=t.updateExpire;return z({maxAge:e,onExpire:n,updateExpire:r})}return z("function"==typeof t?{maxAge:e,onExpire:t,updateExpire:!0}:{maxAge:e})},z.maxArgs=function(e){return z({maxArgs:e})},z.maxSize=function(e){return z({maxSize:e})},z.profile=function(e){return z({profileName:e})},z.promise=z({isPromise:!0,updateExpire:!0}),z.react=z({isReact:!0}),z.serialize=z({isSerialized:!0}),z.serializeWith=function(e){return z({isSerialized:!0,serializer:e})},z.shallow=z({isShallowEqual:!0}),z.transformArgs=function(e){return z({transformArgs:e})},z.updateCacheForKey=function(e){return z({updateCacheForKey:e})},z}(n(2),n(3))},,function(e,t,n){e.exports=function(){"use strict";var e={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},t=Array.prototype.slice;function n(e){var n=e.length;return n?1===n?[e[0]]:2===n?[e[0],e[1]]:3===n?[e[0],e[1],e[2]]:t.call(e,0):[]}function r(e,t){return e===t||e!=e&&t!=t}function o(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var i=function(){function e(e){this.keys=[],this.values=[],this.options=e;var t="function"==typeof e.isMatchingKey;t?this.getKeyIndex=this._getKeyIndexFromMatchingKey:e.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey="function"==typeof e.transformKey,this.shouldCloneArguments=this.canTransformKey||t,this.shouldUpdateOnAdd="function"==typeof e.onCacheAdd,this.shouldUpdateOnChange="function"==typeof e.onCacheChange,this.shouldUpdateOnHit="function"==typeof e.onCacheHit}return Object.defineProperty(e.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return{keys:n(this.keys),size:this.size,values:n(this.values)}},enumerable:!0,configurable:!0}),e.prototype._getKeyIndexFromMatchingKey=function(e){var t=this.options,n=t.isMatchingKey,r=t.maxSize,o=this.keys,i=o.length;if(!i)return-1;if(n(o[0],e))return 0;if(r>1)for(var u=1;u<i;u++)if(n(o[u],e))return u;return-1},e.prototype._getKeyIndexForMany=function(e){var t=this.options.isEqual,n=this.keys,r=n.length;if(!r)return-1;if(1===r)return this._getKeyIndexForSingle(e);var o,i,u=e.length;if(u>1){for(var a=0;a<r;a++)if((o=n[a]).length===u){for(i=0;i<u&&t(o[i],e[i]);i++);if(i===u)return a}}else for(var a=0;a<r;a++)if((o=n[a]).length===u&&t(o[0],e[0]))return a;return-1},e.prototype._getKeyIndexForSingle=function(e){var t=this.keys;if(!t.length)return-1;var n=t[0],r=n.length;if(e.length!==r)return-1;var o=this.options.isEqual;if(r>1){for(var i=0;i<r;i++)if(!o(n[i],e[i]))return-1;return 0}return o(n[0],e[0])?0:-1},e.prototype.orderByLru=function(e,t,n){for(var r=this.keys,o=this.values,i=r.length,u=n;u--;)r[u+1]=r[u],o[u+1]=o[u];r[0]=e,o[0]=t;var a=this.options.maxSize;i===a&&n===i?(r.pop(),o.pop()):n>=a&&(r.length=o.length=a)},e.prototype.updateAsyncCache=function(e){var t=this,n=this.options,r=n.onCacheChange,o=n.onCacheHit,i=this.keys[0],u=this.values[0];this.values[0]=u.then(function(n){return t.shouldUpdateOnHit&&o(t,t.options,e),t.shouldUpdateOnChange&&r(t,t.options,e),n},function(e){var n=t.getKeyIndex(i);throw-1!==n&&(t.keys.splice(n,1),t.values.splice(n,1)),e})},e}();return function t(u,a){if(void 0===a&&(a={}),function(e){return"function"==typeof e&&e.isMemoized}(u))return t(u.fn,o(u.options,a));if("function"!=typeof u)throw new TypeError("You must pass a function to `memoize`.");var c=a.isEqual,s=void 0===c?r:c,f=a.isMatchingKey,l=a.isPromise,h=void 0!==l&&l,p=a.maxSize,d=void 0===p?1:p,y=a.onCacheAdd,v=a.onCacheChange,m=a.onCacheHit,g=a.transformKey,b=o({isEqual:s,isMatchingKey:f,isPromise:h,maxSize:d,onCacheAdd:y,onCacheChange:v,onCacheHit:m,transformKey:g},function(t){var n={};for(var r in t)e[r]||(n[r]=t[r]);return n}(a)),S=new i(b),k=S.keys,C=S.values,x=S.canTransformKey,O=S.shouldCloneArguments,j=S.shouldUpdateOnAdd,A=S.shouldUpdateOnChange,E=S.shouldUpdateOnHit,w=function e(){var t=O?n(arguments):arguments;x&&(t=g(t));var r=k.length?S.getKeyIndex(t):-1;if(-1!==r)E&&m(S,b,e),r&&(S.orderByLru(k[r],C[r],r),A&&v(S,b,e));else{var o=u.apply(this,arguments),i=O?t:n(arguments);S.orderByLru(i,o,k.length),h&&S.updateAsyncCache(e),j&&y(S,b,e),A&&v(S,b,e)}return C[0]};return w.cache=S,w.fn=u,w.isMemoized=!0,w.options=b,w}}()},function(e,t,n){!function(e){"use strict";var t="function"==typeof WeakSet,n=Object.keys;function r(e,t){e&&"object"==typeof e&&t.add(e)}function o(e,t,n,r){for(var o,i=e.length,u=0;u<i;u++)if(o=e[u],n(o[0],t[0],r)&&n(o[1],t[1],r))return!0;return!1}function i(e,t,n,r){for(var o=e.length,i=0;i<o;i++)if(n(e[i],t,r))return!0;return!1}function u(e,t){return e===t||e!=e&&t!=t}function a(e){return e.constructor===Object||null==e.constructor}function c(e){return!!e&&"function"==typeof e.then}function s(e){return!(!e||!e.$$typeof)}function f(){return Object.create({_values:[],add:function(e){this._values.push(e)},has:function(e){return-1!==this._values.indexOf(e)}})}var l=(t,f);function h(e){return function(t){var n=e||t;return function(e,t,o){void 0===o&&(o=l());var i=o.has(e),u=o.has(t);return i||u?i&&u:(r(e,o),r(t,o),n(e,t,o))}}}function p(e){var t=new Array(e.size),n=0;return e.forEach(function(e,r){t[n++]=[r,e]}),t}function d(e){var t=new Array(e.size),n=0;return e.forEach(function(e){t[n++]=e}),t}var y="_owner",v=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function m(e,t,r,o){var i,u=n(e),a=u.length;if(n(t).length!==a)return!1;for(var c=0;c<a;c++){if(i=u[c],!v(t,i))return!1;if(i===y&&s(e)){if(!s(t))return!1}else if(!r(e[i],t[i],o))return!1}return!0}var g=Array.isArray,b="function"==typeof Map,S="function"==typeof Set,k="object";function C(e){var t="function"==typeof e?e(n):n;function n(e,n,r){if(u(e,n))return!0;if(e&&n&&typeof e===k&&typeof n===k){if(a(e)&&a(n))return m(e,n,t,r);var s=g(e),f=g(n);if(s||f)return s===f&&function(e,t,n,r){var o=e.length;if(t.length!==o)return!1;for(var i=0;i<o;i++)if(!n(e[i],t[i],r))return!1;return!0}(e,n,t,r);var l=e instanceof Date,h=n instanceof Date;if(l||h)return l===h&&u(e.getTime(),n.getTime());var y=e instanceof RegExp,v=n instanceof RegExp;if(y||v)return y===v&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,n);if(c(e)||c(n))return e===n;if(b){var C=e instanceof Map,x=n instanceof Map;if(C||x)return C===x&&function(e,t,n,r){if(e.size!==t.size)return!1;for(var i=p(e),u=p(t),a=i.length,c=0;c<a;c++)if(!o(u,i[c],n,r)||!o(i,u[c],n,r))return!1;return!0}(e,n,t,r)}if(S){var O=e instanceof Set,j=n instanceof Set;if(O||j)return O===j&&function(e,t,n,r){if(e.size!==t.size)return!1;for(var o=d(e),u=d(t),a=o.length,c=0;c<a;c++)if(!i(u,o[c],n,r)||!i(o,u[c],n,r))return!1;return!0}(e,n,t,r)}return m(e,n,t,r)}return!1}return n}var x=C(),O=C(function(){return u}),j=C(h()),A=C(h(u));e.circularDeepEqual=j,e.circularShallowEqual=A,e.createCustomEqual=C,e.deepEqual=x,e.sameValueZeroEqual=u,e.shallowEqual=O,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";n.r(t);var r=1e-14;var o=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t||"nDobject",this.id=0,this.color=n||0,this.selected=!1},i=n(0);function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return e.map(function(e){return-e})}function s(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r]-t[r]);return n}function f(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function l(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n]*e[n];var r=Math.sqrt(t);return e.map(function(e){return e/r})}function h(e){for(var t=e.length,n=e[0].length,o=e.map(function(e){return e.map(function(e){return Math.abs(e)<r?0:e})}),i=0,u=0;u<t;u++){if(n<=i)return o;for(var a=u;0===o[a][i];)if(t===++a&&(a=u,n===++i))return o;var c=o[a],s=o[u];o[a]=s,o[u]=c;for(var f=o[u][i],l=u;l<n;l++){var h=o[u][l]/f;o[u][l]=Math.abs(h)<r?0:h}for(var p=0;p<t;p++)if(p!==u){f=o[p][i];for(var d=u;d<n;d++){var y=o[p][d]-f*o[u][d];o[p][d]=Math.abs(y)<r?0:y}}i++}return o}function p(e,t){return f(e,[].concat(u(t),[1]))}function d(e,t){return[].concat(u(e.slice(0,t)),u(e.slice(t+1,e.length)))}function y(e){var t=e[0].length-1,n=function(e){var t=h(u(e));if(!t)return!1;if(t.length<t[0].length-1)return!1;for(var n=0;n<t[0].length-1;n++)if(0===t[n][n])return!1;return t.map(function(e){return-e.slice(-1)[0]})}(e);return n.length===t&&n}var v=n.n(i)()(function(e,t,n){for(var r=[[]],o=new Array(e),i=0;i<e;i++)o[i]=i;for(var u=0;u<e;u++)for(var a=r.length,c=0;c<a;c++)r.push(r[c].concat(o[u]));var s=r.filter(function(e){return e.length>=t&&e.length<=n});return s.sort(function(e,t){return t.length-e.length}),s});function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(e instanceof Array&&t instanceof Array){for(var o=0;o<e.length;o++)if(Math.abs(e[o]-t[o])>n)return!1;return!0}return Math.abs(e-t)<n}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return m(l(e),l(t),n)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,o);var t,n,i,u=x(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u.call(this,"Face")).equ=l(e.map(parseFloat)),t.touchingCorners=[],t.adjacentRefs=new Set,t.dim=t.equ.length-1,t}return t=a,i=[{key:"importFromJSON",value:function(e){return new a(e.face)}},{key:"isPointInsideFaces",value:function(e,t){return e.every(function(e){return e.isPointInsideFace(t)})}},{key:"facesIntersection",value:function(e){return y(e.map(function(e){return e.equ}))}},{key:"facesRefIntersection",value:function(e,t){return y(t.map(function(t){return e[t].equ}))}},{key:"updateAdjacentFacesRefs",value:function(e,t,n){t.forEach(function(t){return e[t].suffixTouchingCorners(n)}),v(t.length,2,2).forEach(function(n){e[t[n[0]]].adjacentRefs.add(t[n[1]]),e[t[n[1]]].adjacentRefs.add(t[n[0]])})}}],(n=[{key:"exportToJSON",value:function(){return'{ "face" : '.concat(JSON.stringify(this.equ)," }")}},{key:"logDetail",value:function(){return"Face name : ".concat(this.name," \n --- halfspace : ").concat(this.equ," \n --- touching corners ").concat(JSON.stringify(this.touchingCorners)," \n --- nb of adjacent faces : ").concat(this.adjacentRefs.length," ")}},{key:"eraseTouchingCorners",value:function(){this.touchingCorners.length=0}},{key:"eraseAdjacentFaces",value:function(){this.adjacentRefs.clear()}},{key:"translate",value:function(e){var t,n,r=f(this.equ.slice(0,-1),e);return t=this.equ,n=r,t[t.length-1]-=n,this}},{key:"transform",value:function(e){for(var t,n=function(e,t){for(var n=[],r=0;r<t.length;r++){for(var o=0,i=0;i<e[0].length;i++)o+=t[i]*e[r][i];n.push(o)}return n}(e,this.equ.slice(0,-1)),o=this.equ.findIndex(function(e){return Math.abs(e)>r}),i=-(t=this.equ)[t.length-1]/function(e,t){return e[t]}(this.equ,o),u=0,a=n.length,c=0;c<a;c++)u+=e[c][o]*i*n[c];return this.equ=[].concat(S(n),[-u]),this}},{key:"isBackFace",value:function(e){return this.orientation(e)<0}},{key:"orientation",value:function(e){var t=this.equ[e];return t<-r?-1:t>r?1:0}},{key:"validForOrder",value:function(e,t){return!this.pointInsideFace(e)&&0!==this.orientation(t)}},{key:"flip",value:function(){this.equ=c(this.equ)}},{key:"suffixTouchingCorners",value:function(e){return!S(this.touchingCorners).find(function(t){return m(t,e)})&&(this.touchingCorners=[].concat(S(this.touchingCorners),[e]),!0)}},{key:"isRealFace",value:function(){return this.touchingCorners.length>=this.dim}},{key:"isPointInsideOrOnFace",value:function(e){return p(this.equ,e)>-r}},{key:"isPointInsideFace",value:function(e){return p(this.equ,e)>r}},{key:"isPointOnFace",value:function(e){var t=p(this.equ,e);return t>-r&&t<r}},{key:"pvFactor",value:function(e){return this.equ[e]}},{key:"intersectionsIntoFace",value:function(e,t){var n=e.pvFactor(t),o=this.pvFactor(t),i=e.equ.map(function(e){return e*o}),u=s(this.equ.map(function(e){return e*n}),i),f=S(e.touchingCorners),l=S(this.touchingCorners).find(function(e){return!f.find(function(t){return t===e})});if(!l)return!1;var h=d(l,t),y=d(u,t);p(y,h)>r&&(y=c(y));var v=new a(y);return v.name="proj de ".concat(this.equ," selon ").concat(t," "),v}},{key:"intersectionIntoSilhouetteFace",value:function(e,t){var n=e.pvFactor(t),r=this.pvFactor(t),o=S(e.equ).map(function(e){return e*r}),i=s(S(this.equ).map(function(e){return e*n}),o),u=S(e.touchingCorners),c=this,f=u.find(function(e){return!c.isPointOnFace(e)});if(!f)return!1;var l=new a(i);return l.isPointInsideFace(f)||l.flip(),l.name="proj de ".concat(this.equ," selon ").concat(t," "),l}},{key:"intersectionCutIntoSilhouetteFace",value:function(e,t){var n=e.pvFactor(t),r=this.pvFactor(t),o=new a(s(S(e.equ).map(function(e){return e*r}),S(this.equ).map(function(e){return e*n})));return o.name="cut de ".concat(this.equ," pour ").concat(t," = 0 "),o}},{key:"silhouette",value:function(e,t){if(this.isBackFace(e))return!1;var n=new a(this.equ);n.touchingCorners=S(this.touchingCorners);var r=[];return this.adjacentRefs.forEach(function(o){if(t[o].isBackFace(e)){var i=n.intersectionIntoSilhouetteFace(t[o],e);i&&r.push(i)}}),r}},{key:"cutSilhouette",value:function(e,t){var n=[],r=this;return this.adjacentRefs.forEach(function(o){var i=r.intersectionCutIntoSilhouetteFace(t[o],e);i&&n.push(i)}),n}},{key:"orderedCorners",value:function(){var e=S(this.touchingCorners),t=e[0],n=this.equ.slice(0,-1),r=s(t,e[1]);return e.map(function(e){return[q(e,n,t,r),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]})}}])&&k(t.prototype,n),i&&k(t,i),a}();function q(e,t,n,r){var o,i,u,a,c,l,h,p,d,y,v=s(e,n),m=(o=r,i=v,u=j(Array.from(o),3),a=u[0],c=u[1],l=u[2],h=j(Array.from(i),3),p=h[0],d=h[1],y=h[2],[c*y-l*d,l*p-a*y,a*d-c*p]),g=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t)}(m),b=f(r,v),S=Math.atan2(g,b);return f(m,t)<0?-S:S}var P=new Uint8Array(16);var I=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var z=function(e){return"string"==typeof e&&I.test(e)},M=[],R=0;R<256;++R)M.push((R+256).toString(16).substr(1));var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]).toLowerCase();if(!z(n))throw TypeError("Stringified UUID is invalid");return n};var N=function(e,t,n){var r=(e=e||{}).random||(e.rng||function(){if(!w&&!(w="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(P)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return _(r)};function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;return V(e)}(this,n)}}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){var n={};return e.filter(function(e){var r=t(e);return!n.hasOwnProperty(r)&&(n[r]=!0)})}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,o);var t,n,i,u=L(a);function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=u.call(this,"solid")).dimension=e,t.faces=[],t.corners=[],t.silhouettes=[],t.adjacenciesValid=!1,t.cornersValid=!1,t.center=[],t.adjacentRefs=new Set,n){var r=V(t);$(n,JSON.stringify).forEach(function(e){return r.suffixFace(new F(e))}),t.ensureFaces()}return t.uuid=N(),t}return t=a,i=[{key:"importFromJSON",value:function(e){var t=new a(parseInt(e.dimension));return t.name=e.solidname,t.id=e.id||0,t.color=e.color,T(e.faces).forEach(function(e){t.addFace(F.importFromJSON(e))}),t}},{key:"initSolidFromFace",value:function(e){var t=new a(e.equ.length-1);return t.suffixFace(e),t.selected=e.selected,t}},{key:"createSolidFromHalfSpaces",value:function(e){var t=new a(e[0].length-1);return e.forEach(function(e,n){var r=new F(e);r.id=n,t.suffixFace(r)}),t.ensureFaces(),t}},{key:"silProject",value:function(e,t){return d(e.equ,t)}},{key:"createSolidFromVertices",value:function(e){var t=e[0].length,n=v(e.length,t,t).map(function(t){return t.map(function(t){return T(e[t])})}),r=(n=$(n=(n=n.map(function(e){return function(e){var t=h(e.map(function(e){return e.concat(1)}));if(t.find(function(e,t){return 0===e[t]}))return!1;var n=t.map(function(e){return e.slice(-1)[0]});return n.push(-f(n,e[0])),n}(e)}).filter(function(e){return e})).map(function(t,n){var r=e.map(function(e){return p(t,e)});return r.every(function(e){return e>=0})?t:!!r.every(function(e){return e<=0})&&t.map(function(e){return-e})}),JSON.stringify)).filter(function(e){return e});return this.createSolidFromHalfSpaces(r)}}],(n=[{key:"clone",value:function(){var e=new a(this.dimension,T(this.faces).map(function(e){return T(e.equ)}));return e.color=this.color,e.name=this.name,e}},{key:"exportToJSON",value:function(){var e='{ "solidname" : "'.concat(this.name,'" , "dimension" : ').concat(this.dimension,' ,\n         "color" : "').concat(this.color,'" , "faces" : [ ');return e+=T(this.faces).map(function(e){return e.exportToJSON()}).join(","),e+="]}"}},{key:"logSummary",value:function(){return"Solid name : ".concat(this.name," | dim : ").concat(this.dimension," \n --- nb of faces : ").concat(this.faces.length," \n --- nb of corners ").concat(this.corners.length," corners : ").concat(JSON.stringify(this.corners),"      \n        \n --- nb of silhouettes : ").concat(this.silhouettes.length," \n --- adjacencies valid ? : ").concat(this.adjacenciesValid," ")}},{key:"logDetail",value:function(){return"Solid name : ".concat(this.name," \n         \n --- corners ").concat(JSON.stringify(this.corners)," \n --- nb of faces : ").concat(this.faces.length," ")}},{key:"suffixFace",value:function(e){this.faces=[].concat(T(this.faces),[e])}},{key:"suffixCorner",value:function(e){return!this.corners.find(function(t){return m(t,e)})&&(this.corners=[].concat(T(this.corners),[e]),!0)}},{key:"eraseCorners",value:function(){this.corners.length=0,this.center.length=0,this.cornersValid=!1,this.faces.forEach(function(e){e.touchingCorners.length=0})}},{key:"eraseOldAdjacencies",value:function(){this.faces.forEach(function(e){e.adjacentRefs.clear(),e.eraseTouchingCorners(),e.eraseAdjacentFaces()}),this.adjacenciesValid=!1,this.eraseCorners()}},{key:"eraseSilhouettes",value:function(){this.silhouettes.length=0}},{key:"filterRealFaces",value:function(){var e=this;this.faces=T(this.faces).filter(function(t){return t.isRealFace()&&T(t.touchingCorners).find(function(t){return e.isPointInsideOrOnSolid(t)})})}},{key:"isPointInsideSolid",value:function(e){return T(this.faces).every(function(t){return t.isPointInsideFace(e)})}},{key:"isPointInsideOrOnSolid",value:function(e){return T(this.faces).every(function(t){return t.isPointInsideOrOnFace(e)})}},{key:"unvalidSolid",value:function(){this.eraseOldAdjacencies(),this.eraseSilhouettes()}},{key:"forceUpdateSolid",value:function(){this.eraseCorners(),this.eraseSilhouettes()}},{key:"addFace",value:function(e){this.suffixFace(e),this.unvalidSolid()}},{key:"cutWith",value:function(e){this.addFace(new F(e))}},{key:"sliceWith",value:function(e){var t=T(e.equ),n=this.clone();n.name=this.name+"/outer/";var r=t.map(function(e){return-e});return this.name=this.name+"/inner/",n.cutWith(r),this.cutWith(t),n}},{key:"isNonEmptySolid",value:function(){return this.ensureFaces(),this.dimension<this.corners.length}},{key:"isCornerAdded",value:function(e){if(!this.isPointInsideOrOnSolid(e))return!1;var t=JSON.stringify(e);return!this.corners.find(function(e){return t===JSON.stringify(e)})&&(this.suffixCorner(e),!0)}},{key:"processCorner",value:function(e,t){this.isCornerAdded(t)&&F.updateAdjacentFacesRefs(this.faces,e,t)}},{key:"computeIntersection",value:function(e){var t=F.facesRefIntersection(this.faces,e);t&&this.processCorner(e,t)}},{key:"computeAdjacencies",value:function(){for(var e=v(this.faces.length,this.dimension,16),t=e.length,n=0;n<t;n++)this.computeIntersection(e[n])}},{key:"computeCorners",value:function(){var e=this,t=this;this.faces.forEach(function(n){var r=n.adjacentRefs.size,o=v(r,t.dimension-1,t.dimension-1),i=o.length,u=[];n.adjacentRefs.forEach(function(t){u.push(e.faces[t].equ)});for(var a=0;a<i;a++){var c=y([n.equ].concat(o[a].map(function(e){return u[e]})));c&&t.isPointInsideOrOnSolid(c)&&n.touchingCorners.push(c)}});var n=[];this.faces.forEach(function(e){n=n.concat(T(e.touchingCorners))}),t.corners.length=0,n.forEach(function(e,r){for(var o=r+1;o<n.length;o++)if(m(e,n[o]))return!1;t.corners.push(e)})}},{key:"findAdjacencies",value:function(){this.eraseOldAdjacencies(),this.computeAdjacencies();var e=this.faces.length;this.filterRealFaces(),this.faces.length!==e&&(this.eraseOldAdjacencies(),this.computeAdjacencies()),this.adjacenciesValid=!0,this.cornersValid=!0}},{key:"findCorners",value:function(){this.eraseCorners(),this.computeCorners(),this.cornersValid=!0}},{key:"ensureFaces",value:function(){this.adjacenciesValid?this.cornersValid||this.findCorners():this.findAdjacencies()}},{key:"ensureSilhouettes",value:function(){if(0===this.silhouettes.length)for(var e=0;e<this.dimension;e++)this.silhouettes[e]=this.createSilhouette(e)}},{key:"createSilhouette",value:function(e){for(var t=T(this.faces),n=[],o=t.length,i=0;i<o;i++){var u=t[i].silhouette(e,t,this.center);u&&(n=[].concat(T(n),T(u)))}var a=n.length,c=[];return n.forEach(function(e,t){for(var o=!0,i=t+1;i<a;i++)if(g(e.equ,n[i].equ,r)){o=!1;break}o&&c.push(e)}),c}},{key:"createAxeCutSilhouette",value:function(e){for(var t=[],n=0;n<this.dimension+1;n++)t[n]=0;t[e]=1;var o=this.clone();o.name=this.name+"/ cut /";var i=o.faces.find(function(e){return g(t,e.equ,0)});i||((i=new F(t)).name="cut",o.addFace(i),o.ensureFaces());var u=T(o.faces),a=i.cutSilhouette(e,u,this.center),c=a.length,s=[];return a.forEach(function(e,t){for(var n=!0,o=t+1;o<c;o++)if(m(e.equ,a[o].equ,r)){n=!1;break}n&&s.push(e)}),s}},{key:"getSilhouette",value:function(e){return this.silhouettes[e]}},{key:"propagateSelection",value:function(){var e=this.selected;this.faces.forEach(function(t){return t.selected=e})}},{key:"project",value:function(e){this.ensureFaces(),this.ensureSilhouettes();var t=T(this.silhouettes[e]).map(function(t){return a.silProject(t,e)}),n=new a(this.dimension-1,t);return n.color=this.color,n.selected=this.selected,n.name="projection "+this.name+"|P"+e+"|",n.parentUuid=this.uuid,[n]}},{key:"axeCut",value:function(e){this.ensureFaces();var t=T(this.createAxeCutSilhouette(e)).map(function(t){return a.silProject(t,e)}),n=new a(this.dimension-1,t);return n.color=this.color,n.selected=this.selected,n.name="axe cut "+this.name+"|P"+e+"|",n.parentUuid=this.uuid,[n]}},{key:"translate",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=e.map(parseFloat),this.faces.forEach(function(t){return t.translate(e)}),this.forceUpdateSolid(),this}},{key:"transform",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=t.map(function(e){return-parseFloat(e)});return this.faces=T(this.faces).map(function(r){return r.translate(n).transform(e).translate(t)}),this.forceUpdateSolid(),this}},{key:"findCornerInSilhouette",value:function(e,t){var n=e.silhouettes[t];return T(this.corners).find(function(e){return F.isPointInsideFaces(n,e)})}},{key:"checkOrientation",value:function(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}(this.faces);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!o.isPointInsideFace(e))return o.isBackFace(t)?-1:1}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"isInFront",value:function(e,t){var n=this.findCornerInSilhouette(e,t);return!!n&&e.checkOrientation(n,t)}},{key:"order",value:function(e,t){var n=this.isInFront(e,t);return n||e.isInFront(this,t)}},{key:"isEqual",value:function(e){var t=T(this.corners),n=T(e.corners);return t.length===n.length&&t.every(function(e){return n.find(function(t){return t===e})})}},{key:"subtract",value:function(e){var t=this.clone();t.ensureFaces();var n=e.reduce(function(e,n){return[].concat(T(e),[t.sliceWith(n)])},[]).filter(function(e){return e.isNonEmptySolid()});return n.forEach(function(e){e.unvalidSolid(),e.ensureFaces(),e.ensureSilhouettes()}),n}},{key:"clipWith",value:function(e,t){return this.isEqual(e)?e:-1===this.order(e,t)?e:e.subtract(this.getSilhouette(t))}},{key:"solidsSilhouetteSubtract",value:function(e,t){for(var n=e.map(function(e){return e.clone()}),r=[],o=0;o<e.length;o++)r=r.concat(this.clipWith(n[o],t));return r}},{key:"middleOf",value:function(){for(var e=this,t=[],n=function(n){var r=T(e.corners).map(function(e){return e[n]}),o=Math.max.apply(Math,T(r)),i=Math.min.apply(Math,T(r));t[n]=(o+i)/2},r=0;r<this.dimension;r++)n(r);return t}}])&&H(t.prototype,n),i&&H(t,i),a}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(u,o);var t,n,r,i=X(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,"Group")).space="",t.objectList=new Set,t.uuid=N(),e&&(t.objectList=e),t}return t=u,r=[{key:"importFromJSON",value:function(e,t){var n=new u,r=new Map;return t.solids.forEach(function(e){e.id&&r.set(e.id,e.uuid)}),e.refs.forEach(function(e){var t=r.get(e);n.objectList.add(t)}),n.space=t,n}}],(n=[{key:"exportToJSON",value:function(){return'{ "group" : '.concat(JSON.stringify(this.objectList)," }")}},{key:"logDetail",value:function(){return"Group name : ".concat(this.name," \n --- objects : ").concat(this.objectList," \n ")}},{key:"emptyGroup",value:function(){this.objectList.length=0}},{key:"translate",value:function(e){var t=this;return this.objectList.forEach(function(n){t.space.solids.get(n).translate(e)}),this}},{key:"transform",value:function(e,t){var n=this;return this.objectList.forEach(function(r){n.space.solids.get(r).transform(e,t)}),this}},{key:"middleOf",value:function(){var e=this,t=this.space.dimension,n=[],r=[];this.objectList.forEach(function(o){e.space.solids.get(o).corners.forEach(function(e){for(var o=0;o<t;o++)n[o]=Math.min(e[o],n[o]||e[o]),r[o]=Math.max(e[o],r[o]||e[o])})});for(var o=[],i=0;i<t;i++)o[i]=(r[i]+n[i])/2;return o}},{key:"addObject",value:function(e){this.objectList.push(e)}},{key:"removeObject",value:function(e){}}])&&Y(t.prototype,n),r&&Y(t,r),u}();function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n||"space",this.idx=0,this.dimension=t,this.solids=new Map,this.groups=new Map,this.projection=[],this.removeHidden=!1}var t,n,r;return t=e,r=[{key:"importFromJSON",value:function(t){var n=new e(parseInt(t.dimension),t.spacename);return te(t.solids).forEach(function(e){n.suffixSolid(B.importFromJSON(e))}),t.groups&&te(t.groups).forEach(function(e){var t=ee.importFromJSON(e,n);n.suffixGroup(t)}),n}}],(n=[{key:"newOjectId",value:function(){var e="object"+this.idx;return this.idx+=1,e}},{key:"exportToJSON",value:function(){var e='{ "spacename" : "'.concat(this.name,'" , "dimension" : ').concat(this.dimension,' ,  "solids" : [ ');return this.solids.forEach(function(t){e+=t.exportToJSON()+","}),e+='], "groups" : [',e+="]} "}},{key:"logDetail",value:function(){}},{key:"suffixGroup",value:function(e){this.groups.set(e.uuid,e)}},{key:"suffixSolid",value:function(e){this.solids.set(e.uuid,e)}},{key:"clearSolids",value:function(){this.solids.clear()}},{key:"clearGroups",value:function(){this.Groups.clear()}},{key:"ensureSolids",value:function(){this.solids.forEach(function(e){e.ensureFaces(),e.ensureSilhouettes()})}},{key:"trigSolid",value:function(e){var t=this,n=!1;if(this.groups.forEach(function(r){r.objectList.has(e)&&(n=!0,console.log("found in group"),r.selected=!r.selected,r.objectList.forEach(function(e){var n=t.solids.get(e);console.log("add solid",e,n),n.selected=!n.selected}))}),!n){var r=this.solids.get(e);r&&(console.log("add solid",e,r),r.selected=!r.selected)}}},{key:"transform",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!0,o=!1;this.solids.forEach(function(e){e.selected&&(r=!1)}),this.groups.forEach(function(i){if(i.selected||r){o=!0;var u=t?i.middleOf():[0,0,0,0];i.transform(e,u,n)}}),o||this.solids.forEach(function(o){if(r||o.selected){var i=t?o.middleOf():[0,0,0,0];o.transform(e,i,n)}})}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0;this.solids.forEach(function(e){e.selected&&(n=!1)}),this.solids.forEach(function(r){(n||r.selected)&&r.translate(e,t)})}},{key:"removeHiddenSolids",value:function(e){for(var t=te(this.solids),n=t.map(function(e){return[e.clone()]}),r=0;r<t.length;r++)for(var o=t[r],i=0;i<n.length;i++)if(i!==r){var u=n[i].clone(),a=o.solidsSilhouetteSubtract(u,e);n[i]=a}return n.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.isNonEmptySolid()})}},{key:"projectName",value:function(e){return"".concat(this.name," projection axis ").concat(e)}},{key:"axeCutName",value:function(e){return"".concat(this.name," cut axis ").concat(e)}},{key:"projectSolids",value:function(e){var t=[];return this.solids.forEach(function(n,r){return t.push(n.project(e))}),t.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.isNonEmptySolid()})}},{key:"axeCutSolids",value:function(e){var t=[];return this.solids.forEach(function(n,r){return t.push(n.axeCut(e))}),t.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.isNonEmptySolid()})}},{key:"project",value:function(t){var n=new e(this.dimension-1);return n.name=this.projectName(t),this.projectSolids(t).forEach(function(e){return n.suffixSolid(e)}),n}},{key:"axeCut",value:function(t){var n=new e(this.dimension-1);return n.name=this.axeCutName(t),this.axeCutSolids(t).forEach(function(e){return n.suffixSolid(e)}),n}},{key:"sliceProject",value:function(e){}},{key:"middleOf",value:function(){}},{key:"deleteSelectedSolids",value:function(){}},{key:"createSolid",value:function(e){var t=new B(this.dimension);return e.forEach(function(e){return t.suffixFace(new F(e))}),t.ensureFaces(),this.suffixSolid(t),t}}])&&re(t.prototype,n),r&&re(t,r),e}();function ie(e,t){return new B(3,[[-1,0,0,t],[1,0,0,-e],[0,-1,0,t],[0,1,0,-e],[0,0,-1,t],[0,0,1,-e]])}function ue(e,t){return new B(4,[[-1,0,0,0,t],[1,0,0,0,-e],[0,-1,0,0,t],[0,1,0,0,-e],[0,0,-1,0,t],[0,0,1,0,-e],[0,0,0,-1,t],[0,0,0,1,-e]])}n.d(t,"MAX_FACE_PER_CORNER",function(){return 16}),n.d(t,"VERY_SMALL_NUM",function(){return r}),n.d(t,"NDObject",function(){return o}),n.d(t,"Space",function(){return oe}),n.d(t,"Face",function(){return F}),n.d(t,"Solid",function(){return B}),n.d(t,"cube3D",function(){return ie}),n.d(t,"cube4D",function(){return ue})}])});